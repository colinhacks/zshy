// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`zshy with different tsconfig configurations > should work with basic.test.tsconfig.json 1`] = `
{
  "exitCode": 0,
  "stderr": "",
  "stdout": "ğŸ’ Starting zshy build...
ğŸ—£ï¸ Verbose mode enabled
âš™ï¸  Detected project root: <project-root>
ğŸ“¦ Reading package.json from ./package.json
ğŸ”§ Parsed zshy config: {
  "exports": {
    ".": "./src/index.ts",
    "./utils": "./src/utils.ts",
    "./plugins/*": "./src/plugins/*"
  },
  "sourceDialects": [
    "@zod/source"
  ],
  "tsconfig": "./tsconfig.build.json"
}
ğŸ“ Reading tsconfig from ./basic.test.tsconfig.json
ğŸ—‘ï¸  Cleaning up outDir...
   âœ… Successfully cleaned up outDir: dist
ğŸ—‘ï¸  Skipping cleanup of declarationDir as it contains source files
â¡ï¸  Determining entrypoints...
   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   â•‘ Subpath          â”‚ Entrypoint                  â•‘
   â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
   â•‘ "zshy"           â”‚ ./src/index.ts              â•‘
   â•‘ "zshy/utils"     â”‚ ./src/utils.ts              â•‘
   â•‘ "zshy/plugins/*" â”‚ ./src/plugins/* (<count> matches) â•‘
   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”§ Resolved build paths:
   â•”â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   â•‘ Location â”‚ Resolved path â•‘
   â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
   â•‘ rootDir  â”‚ ./src         â•‘
   â•‘ outDir   â”‚ ./dist        â•‘
   â•šâ•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸŸ¨ Package is an ES module (package.json#type is "module")
ğŸ§± Building CJS... (rewriting .ts -> .cjs/.d.cts)
   Entry points: ./src/index.ts, ./src/utils.ts, ./src/plugins/a.ts, ./src/plugins/b.ts
   Module: CommonJS
   Target: ES2020
   Writing: <project-root>/dist/utils.cjs
   Writing: <project-root>/dist/utils.d.cts
   Writing: <project-root>/dist/index.cjs
   Writing: <project-root>/dist/index.d.cts
   Writing: <project-root>/dist/plugins/a.cjs
   Writing: <project-root>/dist/plugins/a.d.cts
   Writing: <project-root>/dist/plugins/b.cjs
   Writing: <project-root>/dist/plugins/b.d.cts
ğŸ§± Building ESM...
   Entry points: ./src/index.ts, ./src/utils.ts, ./src/plugins/a.ts, ./src/plugins/b.ts
   Module: ESNext
   Target: ES2020
   Writing: <project-root>/dist/utils.js
   Writing: <project-root>/dist/utils.d.ts
   Writing: <project-root>/dist/index.js
   Writing: <project-root>/dist/index.d.ts
   Writing: <project-root>/dist/plugins/a.js
   Writing: <project-root>/dist/plugins/a.d.ts
   Writing: <project-root>/dist/plugins/b.js
   Writing: <project-root>/dist/plugins/b.d.ts
ğŸ“¦ Updating package.json exports...
   {
     ".": {
       "@zod/source": "./src/index.ts",
       "types": "./dist/index.d.cts",
       "import": "./dist/index.js",
       "require": "./dist/index.cjs"
     },
     "./utils": {
       "@zod/source": "./src/utils.ts",
       "types": "./dist/utils.d.cts",
       "import": "./dist/utils.js",
       "require": "./dist/utils.cjs"
     },
     "./plugins/*": {
       "@zod/source": "./src/plugins/*",
       "types": "./dist/plugins/*",
       "import": "./dist/plugins/*",
       "require": "./dist/plugins/*"
     }
   }
ğŸ“ Contents of outDir (dist):
â”œâ”€â”€ plugins
â”‚   â”œâ”€â”€ a.cjs
â”‚   â”œâ”€â”€ a.d.cts
â”‚   â”œâ”€â”€ a.d.ts
â”‚   â”œâ”€â”€ a.js
â”‚   â”œâ”€â”€ b.cjs
â”‚   â”œâ”€â”€ b.d.cts
â”‚   â”œâ”€â”€ b.d.ts
â”‚   â””â”€â”€ b.js
â”œâ”€â”€ index.cjs
â”œâ”€â”€ index.d.cts
â”œâ”€â”€ index.d.ts
â”œâ”€â”€ index.js
â”œâ”€â”€ utils.cjs
â”œâ”€â”€ utils.d.cts
â”œâ”€â”€ utils.d.ts
â””â”€â”€ utils.js
ğŸ‰ Build complete!",
}
`;

exports[`zshy with different tsconfig configurations > should work with bin.test.tsconfig.json 1`] = `
{
  "exitCode": 1,
  "stderr": "node:internal/modules/run_main:105
    triggerUncaughtException(
    ^
Error [TransformError]: Transform failed with 1 error:
<project-root>/src/index.ts:1:3: ERROR: Syntax error "!"
    at failureErrorWithLog (<project-root>/node_modules/.pnpm/esbuild@0.25.5/node_modules/esbuild/lib/main.js:1463:15)
    at <project-root>/node_modules/.pnpm/esbuild@0.25.5/node_modules/esbuild/lib/main.js:734:50
    at responseCallbacks.<computed> (<project-root>/node_modules/.pnpm/esbuild@0.25.5/node_modules/esbuild/lib/main.js:601:9)
    at handleIncomingPacket (<project-root>/node_modules/.pnpm/esbuild@0.25.5/node_modules/esbuild/lib/main.js:656:12)
    at Socket.readFromStdout (<project-root>/node_modules/.pnpm/esbuild@0.25.5/node_modules/esbuild/lib/main.js:579:7)
    at Socket.emit (node:events:507:28)
    at addChunk (node:internal/streams/readable:559:12)
    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)
    at Readable.push (node:internal/streams/readable:390:5)
    at Pipe.onStreamRead (node:internal/stream_base_commons:189:23)

Node.js v24.3.0",
  "stdout": "",
}
`;

exports[`zshy with different tsconfig configurations > should work with bin-string.test.tsconfig.json 1`] = `
{
  "exitCode": 1,
  "stderr": "node:internal/modules/run_main:105
    triggerUncaughtException(
    ^
Error [TransformError]: Transform failed with 1 error:
<project-root>/src/index.ts:1:3: ERROR: Syntax error "!"
    at failureErrorWithLog (<project-root>/node_modules/.pnpm/esbuild@0.25.5/node_modules/esbuild/lib/main.js:1463:15)
    at <project-root>/node_modules/.pnpm/esbuild@0.25.5/node_modules/esbuild/lib/main.js:734:50
    at responseCallbacks.<computed> (<project-root>/node_modules/.pnpm/esbuild@0.25.5/node_modules/esbuild/lib/main.js:601:9)
    at handleIncomingPacket (<project-root>/node_modules/.pnpm/esbuild@0.25.5/node_modules/esbuild/lib/main.js:656:12)
    at Socket.readFromStdout (<project-root>/node_modules/.pnpm/esbuild@0.25.5/node_modules/esbuild/lib/main.js:579:7)
    at Socket.emit (node:events:507:28)
    at addChunk (node:internal/streams/readable:559:12)
    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)
    at Readable.push (node:internal/streams/readable:390:5)
    at Pipe.onStreamRead (node:internal/stream_base_commons:189:23)

Node.js v24.3.0",
  "stdout": "",
}
`;

exports[`zshy with different tsconfig configurations > should work with legacy.test.tsconfig.json 1`] = `
{
  "exitCode": 0,
  "stderr": "",
  "stdout": "ğŸ’ Starting zshy build...
ğŸ—£ï¸ Verbose mode enabled
âš™ï¸  Detected project root: <project-root>
ğŸ“¦ Reading package.json from ./package.json
ğŸ”§ Parsed zshy config: {
  "exports": {
    ".": "./src/index.ts",
    "./utils": "./src/utils.ts",
    "./plugins/*": "./src/plugins/*"
  },
  "sourceDialects": [
    "@zod/source"
  ],
  "tsconfig": "./tsconfig.build.json"
}
ğŸ“ Reading tsconfig from ./legacy.test.tsconfig.json
ğŸ—‘ï¸  Cleaning up outDir...
   âœ… Successfully cleaned up outDir: lib
ğŸ—‘ï¸  Skipping cleanup of declarationDir as it contains source files
â¡ï¸  Determining entrypoints...
   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   â•‘ Subpath          â”‚ Entrypoint                  â•‘
   â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
   â•‘ "zshy"           â”‚ ./src/index.ts              â•‘
   â•‘ "zshy/utils"     â”‚ ./src/utils.ts              â•‘
   â•‘ "zshy/plugins/*" â”‚ ./src/plugins/* (<count> matches) â•‘
   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”§ Resolved build paths:
   â•”â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   â•‘ Location â”‚ Resolved path â•‘
   â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
   â•‘ rootDir  â”‚ ./src         â•‘
   â•‘ outDir   â”‚ ./lib         â•‘
   â•šâ•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸŸ¨ Package is an ES module (package.json#type is "module")
ğŸ§± Building CJS... (rewriting .ts -> .cjs/.d.cts)
   Entry points: ./src/index.ts, ./src/utils.ts, ./src/plugins/a.ts, ./src/plugins/b.ts
   Module: CommonJS
   Target: ES2018
   Writing: <project-root>/lib/utils.js.map
   Writing: <project-root>/lib/utils.cjs
   Writing: <project-root>/lib/utils.d.cts
   Writing: <project-root>/lib/index.js.map
   Writing: <project-root>/lib/index.cjs
   Writing: <project-root>/lib/index.d.cts
   Writing: <project-root>/lib/plugins/a.js.map
   Writing: <project-root>/lib/plugins/a.cjs
   Writing: <project-root>/lib/plugins/a.d.cts
   Writing: <project-root>/lib/plugins/b.js.map
   Writing: <project-root>/lib/plugins/b.cjs
   Writing: <project-root>/lib/plugins/b.d.cts
ğŸ§± Building ESM...
   Entry points: ./src/index.ts, ./src/utils.ts, ./src/plugins/a.ts, ./src/plugins/b.ts
   Module: ESNext
   Target: ES2018
   Writing: <project-root>/lib/utils.js.map
   Writing: <project-root>/lib/utils.js
   Writing: <project-root>/lib/utils.d.ts
   Writing: <project-root>/lib/index.js.map
   Writing: <project-root>/lib/index.js
   Writing: <project-root>/lib/index.d.ts
   Writing: <project-root>/lib/plugins/a.js.map
   Writing: <project-root>/lib/plugins/a.js
   Writing: <project-root>/lib/plugins/a.d.ts
   Writing: <project-root>/lib/plugins/b.js.map
   Writing: <project-root>/lib/plugins/b.js
   Writing: <project-root>/lib/plugins/b.d.ts
ğŸ“¦ Updating package.json exports...
   {
     ".": {
       "@zod/source": "./src/index.ts",
       "types": "./lib/index.d.cts",
       "import": "./lib/index.js",
       "require": "./lib/index.cjs"
     },
     "./utils": {
       "@zod/source": "./src/utils.ts",
       "types": "./lib/utils.d.cts",
       "import": "./lib/utils.js",
       "require": "./lib/utils.cjs"
     },
     "./plugins/*": {
       "@zod/source": "./src/plugins/*",
       "types": "./lib/plugins/*",
       "import": "./lib/plugins/*",
       "require": "./lib/plugins/*"
     }
   }
ğŸ“ Contents of outDir (lib):
â”œâ”€â”€ plugins
â”‚   â”œâ”€â”€ a.cjs
â”‚   â”œâ”€â”€ a.d.cts
â”‚   â”œâ”€â”€ a.d.ts
â”‚   â”œâ”€â”€ a.js
â”‚   â”œâ”€â”€ a.js.map
â”‚   â”œâ”€â”€ b.cjs
â”‚   â”œâ”€â”€ b.d.cts
â”‚   â”œâ”€â”€ b.d.ts
â”‚   â”œâ”€â”€ b.js
â”‚   â””â”€â”€ b.js.map
â”œâ”€â”€ index.cjs
â”œâ”€â”€ index.d.cts
â”œâ”€â”€ index.d.ts
â”œâ”€â”€ index.js
â”œâ”€â”€ index.js.map
â”œâ”€â”€ utils.cjs
â”œâ”€â”€ utils.d.cts
â”œâ”€â”€ utils.d.ts
â”œâ”€â”€ utils.js
â””â”€â”€ utils.js.map
ğŸ‰ Build complete!",
}
`;

exports[`zshy with different tsconfig configurations > should work with modern.test.tsconfig.json 1`] = `
{
  "exitCode": 0,
  "stderr": "",
  "stdout": "ğŸ’ Starting zshy build...
ğŸ—£ï¸ Verbose mode enabled
âš™ï¸  Detected project root: <project-root>
ğŸ“¦ Reading package.json from ./package.json
ğŸ”§ Parsed zshy config: {
  "exports": {
    ".": "./src/index.ts",
    "./utils": "./src/utils.ts",
    "./plugins/*": "./src/plugins/*"
  },
  "sourceDialects": [
    "@zod/source"
  ],
  "tsconfig": "./tsconfig.build.json"
}
ğŸ“ Reading tsconfig from ./modern.test.tsconfig.json
ğŸ—‘ï¸  Cleaning up outDir...
   âœ… Successfully cleaned up outDir: output/js
ğŸ—‘ï¸  Cleaning up declarationDir...
   âœ… Successfully cleaned up declarationDir: output/types
â¡ï¸  Determining entrypoints...
   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   â•‘ Subpath          â”‚ Entrypoint                  â•‘
   â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
   â•‘ "zshy"           â”‚ ./src/index.ts              â•‘
   â•‘ "zshy/utils"     â”‚ ./src/utils.ts              â•‘
   â•‘ "zshy/plugins/*" â”‚ ./src/plugins/* (<count> matches) â•‘
   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”§ Resolved build paths:
   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   â•‘ Location       â”‚ Resolved path  â•‘
   â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
   â•‘ rootDir        â”‚ .              â•‘
   â•‘ outDir         â”‚ ./output/js    â•‘
   â•‘ declarationDir â”‚ ./output/types â•‘
   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸŸ¨ Package is an ES module (package.json#type is "module")
ğŸ§± Building CJS... (rewriting .ts -> .cjs/.d.cts)
   Entry points: ./src/index.ts, ./src/utils.ts, ./src/plugins/a.ts, ./src/plugins/b.ts
   Module: CommonJS
   Target: ES2022
   Writing: <project-root>/output/js/src/utils.cjs
   Writing: <project-root>/output/types/src/utils.d.cts
   Writing: <project-root>/output/js/src/index.cjs
   Writing: <project-root>/output/types/src/index.d.cts
   Writing: <project-root>/output/js/src/plugins/a.cjs
   Writing: <project-root>/output/types/src/plugins/a.d.cts
   Writing: <project-root>/output/js/src/plugins/b.cjs
   Writing: <project-root>/output/types/src/plugins/b.d.cts
ğŸ§± Building ESM...
   Entry points: ./src/index.ts, ./src/utils.ts, ./src/plugins/a.ts, ./src/plugins/b.ts
   Module: ESNext
   Target: ES2022
   Writing: <project-root>/output/js/src/utils.js
   Writing: <project-root>/output/types/src/utils.d.ts
   Writing: <project-root>/output/js/src/index.js
   Writing: <project-root>/output/types/src/index.d.ts
   Writing: <project-root>/output/js/src/plugins/a.js
   Writing: <project-root>/output/types/src/plugins/a.d.ts
   Writing: <project-root>/output/js/src/plugins/b.js
   Writing: <project-root>/output/types/src/plugins/b.d.ts
ğŸ“¦ Updating package.json exports...
   {
     ".": {
       "@zod/source": "./src/index.ts",
       "types": "./output/types/src/index.d.cts",
       "import": "./output/js/src/index.js",
       "require": "./output/js/src/index.cjs"
     },
     "./utils": {
       "@zod/source": "./src/utils.ts",
       "types": "./output/types/src/utils.d.cts",
       "import": "./output/js/src/utils.js",
       "require": "./output/js/src/utils.cjs"
     },
     "./plugins/*": {
       "@zod/source": "./src/plugins/*",
       "types": "./output/types/src/plugins/*",
       "import": "./output/js/src/plugins/*",
       "require": "./output/js/src/plugins/*"
     }
   }
ğŸ“ Contents of outDir (output/js):
â””â”€â”€ src
    â”œâ”€â”€ plugins
    â”‚   â”œâ”€â”€ a.cjs
    â”‚   â”œâ”€â”€ a.js
    â”‚   â”œâ”€â”€ b.cjs
    â”‚   â””â”€â”€ b.js
    â”œâ”€â”€ index.cjs
    â”œâ”€â”€ index.js
    â”œâ”€â”€ utils.cjs
    â””â”€â”€ utils.js
ğŸ“ Contents of declarationDir (output/types):
â””â”€â”€ src
    â”œâ”€â”€ plugins
    â”‚   â”œâ”€â”€ a.d.cts
    â”‚   â”œâ”€â”€ a.d.ts
    â”‚   â”œâ”€â”€ b.d.cts
    â”‚   â””â”€â”€ b.d.ts
    â”œâ”€â”€ index.d.cts
    â”œâ”€â”€ index.d.ts
    â”œâ”€â”€ utils.d.cts
    â””â”€â”€ utils.d.ts
ğŸ‰ Build complete!",
}
`;

exports[`zshy with different tsconfig configurations > should work with root-output.test.tsconfig.json 1`] = `
{
  "exitCode": 0,
  "stderr": "",
  "stdout": "ğŸ’ Starting zshy build...
ğŸ—£ï¸ Verbose mode enabled
âš™ï¸  Detected project root: <project-root>
ğŸ“¦ Reading package.json from ./package.json
ğŸ”§ Parsed zshy config: {
  "exports": {
    ".": "./src/index.ts",
    "./utils": "./src/utils.ts",
    "./plugins/*": "./src/plugins/*"
  },
  "sourceDialects": [
    "@zod/source"
  ],
  "tsconfig": "./tsconfig.build.json"
}
ğŸ“ Reading tsconfig from ./root-output.test.tsconfig.json
ğŸ—‘ï¸  Skipping cleanup of outDir as it contains source files
ğŸ—‘ï¸  Skipping cleanup of declarationDir as it contains source files
â¡ï¸  Determining entrypoints...
   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   â•‘ Subpath          â”‚ Entrypoint                  â•‘
   â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
   â•‘ "zshy"           â”‚ ./src/index.ts              â•‘
   â•‘ "zshy/utils"     â”‚ ./src/utils.ts              â•‘
   â•‘ "zshy/plugins/*" â”‚ ./src/plugins/* (<count> matches) â•‘
   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”§ Resolved build paths:
   â•”â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   â•‘ Location â”‚ Resolved path â•‘
   â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
   â•‘ rootDir  â”‚ ./src         â•‘
   â•‘ outDir   â”‚ .             â•‘
   â•šâ•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸŸ¨ Package is an ES module (package.json#type is "module")
ğŸ§± Building CJS... (rewriting .ts -> .cjs/.d.cts)
   Entry points: ./src/index.ts, ./src/utils.ts, ./src/plugins/a.ts, ./src/plugins/b.ts
   Module: CommonJS
   Target: ES2020
   Writing: <project-root>/utils.cjs
   Writing: <project-root>/utils.d.ts.map
   Writing: <project-root>/utils.d.cts
   Writing: <project-root>/index.cjs
   Writing: <project-root>/index.d.ts.map
   Writing: <project-root>/index.d.cts
   Writing: <project-root>/plugins/a.cjs
   Writing: <project-root>/plugins/a.d.ts.map
   Writing: <project-root>/plugins/a.d.cts
   Writing: <project-root>/plugins/b.cjs
   Writing: <project-root>/plugins/b.d.ts.map
   Writing: <project-root>/plugins/b.d.cts
ğŸ§± Building ESM...
   Entry points: ./src/index.ts, ./src/utils.ts, ./src/plugins/a.ts, ./src/plugins/b.ts
   Module: ESNext
   Target: ES2020
   Writing: <project-root>/utils.js
   Writing: <project-root>/utils.d.ts.map
   Writing: <project-root>/utils.d.ts
   Writing: <project-root>/index.js
   Writing: <project-root>/index.d.ts.map
   Writing: <project-root>/index.d.ts
   Writing: <project-root>/plugins/a.js
   Writing: <project-root>/plugins/a.d.ts.map
   Writing: <project-root>/plugins/a.d.ts
   Writing: <project-root>/plugins/b.js
   Writing: <project-root>/plugins/b.d.ts.map
   Writing: <project-root>/plugins/b.d.ts
ğŸ“¦ Updating package.json exports...
   {
     ".": {
       "@zod/source": "./src/index.ts",
       "types": "./index.d.cts",
       "import": "./index.js",
       "require": "./index.cjs"
     },
     "./utils": {
       "@zod/source": "./src/utils.ts",
       "types": "./utils.d.cts",
       "import": "./utils.js",
       "require": "./utils.cjs"
     },
     "./plugins/*": {
       "@zod/source": "./src/plugins/*",
       "types": "./plugins/*",
       "import": "./plugins/*",
       "require": "./plugins/*"
     }
   }
ğŸ‰ Build complete!",
}
`;

exports[`zshy with different tsconfig configurations > should work with separate-declarations.test.tsconfig.json 1`] = `
{
  "exitCode": 0,
  "stderr": "",
  "stdout": "ğŸ’ Starting zshy build...
ğŸ—£ï¸ Verbose mode enabled
âš™ï¸  Detected project root: <project-root>
ğŸ“¦ Reading package.json from ./package.json
ğŸ”§ Parsed zshy config: {
  "exports": {
    ".": "./src/index.ts",
    "./utils": "./src/utils.ts",
    "./plugins/*": "./src/plugins/*"
  },
  "sourceDialects": [
    "@zod/source"
  ],
  "tsconfig": "./tsconfig.build.json"
}
ğŸ“ Reading tsconfig from ./separate-declarations.test.tsconfig.json
ğŸ—‘ï¸  Cleaning up outDir...
   âœ… Successfully cleaned up outDir: build
ğŸ—‘ï¸  Cleaning up declarationDir...
   âœ… Successfully cleaned up declarationDir: types
â¡ï¸  Determining entrypoints...
   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   â•‘ Subpath          â”‚ Entrypoint                  â•‘
   â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
   â•‘ "zshy"           â”‚ ./src/index.ts              â•‘
   â•‘ "zshy/utils"     â”‚ ./src/utils.ts              â•‘
   â•‘ "zshy/plugins/*" â”‚ ./src/plugins/* (<count> matches) â•‘
   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”§ Resolved build paths:
   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   â•‘ Location       â”‚ Resolved path â•‘
   â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
   â•‘ rootDir        â”‚ ./src         â•‘
   â•‘ outDir         â”‚ ./build       â•‘
   â•‘ declarationDir â”‚ ./types       â•‘
   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸŸ¨ Package is an ES module (package.json#type is "module")
ğŸ§± Building CJS... (rewriting .ts -> .cjs/.d.cts)
   Entry points: ./src/index.ts, ./src/utils.ts, ./src/plugins/a.ts, ./src/plugins/b.ts
   Module: CommonJS
   Target: ES2020
   Writing: <project-root>/build/utils.cjs
   Writing: <project-root>/types/utils.d.cts
   Writing: <project-root>/build/index.cjs
   Writing: <project-root>/types/index.d.cts
   Writing: <project-root>/build/plugins/a.cjs
   Writing: <project-root>/types/plugins/a.d.cts
   Writing: <project-root>/build/plugins/b.cjs
   Writing: <project-root>/types/plugins/b.d.cts
ğŸ§± Building ESM...
   Entry points: ./src/index.ts, ./src/utils.ts, ./src/plugins/a.ts, ./src/plugins/b.ts
   Module: ESNext
   Target: ES2020
   Writing: <project-root>/build/utils.js
   Writing: <project-root>/types/utils.d.ts
   Writing: <project-root>/build/index.js
   Writing: <project-root>/types/index.d.ts
   Writing: <project-root>/build/plugins/a.js
   Writing: <project-root>/types/plugins/a.d.ts
   Writing: <project-root>/build/plugins/b.js
   Writing: <project-root>/types/plugins/b.d.ts
ğŸ“¦ Updating package.json exports...
   {
     ".": {
       "@zod/source": "./src/index.ts",
       "types": "./types/index.d.cts",
       "import": "./build/index.js",
       "require": "./build/index.cjs"
     },
     "./utils": {
       "@zod/source": "./src/utils.ts",
       "types": "./types/utils.d.cts",
       "import": "./build/utils.js",
       "require": "./build/utils.cjs"
     },
     "./plugins/*": {
       "@zod/source": "./src/plugins/*",
       "types": "./types/plugins/*",
       "import": "./build/plugins/*",
       "require": "./build/plugins/*"
     }
   }
ğŸ“ Contents of outDir (build):
â”œâ”€â”€ plugins
â”‚   â”œâ”€â”€ a.cjs
â”‚   â”œâ”€â”€ a.js
â”‚   â”œâ”€â”€ b.cjs
â”‚   â””â”€â”€ b.js
â”œâ”€â”€ index.cjs
â”œâ”€â”€ index.js
â”œâ”€â”€ utils.cjs
â””â”€â”€ utils.js
ğŸ“ Contents of declarationDir (types):
â”œâ”€â”€ plugins
â”‚   â”œâ”€â”€ a.d.cts
â”‚   â”œâ”€â”€ a.d.ts
â”‚   â”œâ”€â”€ b.d.cts
â”‚   â””â”€â”€ b.d.ts
â”œâ”€â”€ index.d.cts
â”œâ”€â”€ index.d.ts
â”œâ”€â”€ utils.d.cts
â””â”€â”€ utils.d.ts
ğŸ‰ Build complete!",
}
`;
